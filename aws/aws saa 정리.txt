1.iam
	클라우드쉘은 웹에서 vpc에 접근할수있는 터미널임
	이건 지원하는 국가가 따로있음(없으면 그냥 ec2 스몰 쓰면됨)
	대신 클라우드쉘이 편한게,awscli가 깔려있고,로그인도 되어있어서 그냥쓰면됨
	그리고 안에 저장한파일도 그대로 남아있음
	
	iam에선 그룹을 만들수있고,그룹에 정책을 할당해서 각 작업자마다 자리를 줄수있음
	그리고 작업자는 여러 그룹에 속할수있음
	iam은 글로벌서비스임
	
	처음 루트계정을 만들고나면,바로 관리자계정을 만들고 그 계정으로 작업을 해야함
	그리고 유저를 만들면 csv를 다운로드 받아야함(다시못받으니까 여기서 받아야함)
	
	iam계정을 만들고나면,iam 메인페이지에서 오른쪽에보면 계정id를 alias해서 문자로 바꿀수있음(별칭생성)
	그러면 로그인할떄 숫자대신 문자치고들어갈수있음
	
	policy는 version,id,statement로 구성됨
	statement의 구성은
		sid는 식별자임,즉 그 statement의 id값임(옵션,안주면 알아서 해시값넣음)
		effect는 해당 액션을 허용할지 거부할지(allow,deny)
		principal은 적용할 대상,즉 계정,사용자,roll등을 선택함
		action은 액션을 나열한것
		resource는 대상을 나열한것,이건 와일드카드를 사용해서 전체를 할수도있고,범주내 특정 객체만 넣을수도있음
		conditon은 이 정책이 특정 조건에서만 효력이 발생하게 할수있음(if문),조건은 전역조건이나 서비스별 조건일수있음(이거도 당연히 옵션임)
			즉 특정 username에만 붙게 한다던가 하는식임
	
	그룹을 만들땐,iam의 user groups에 가서 그룹을 만들고,정책을 연결하고 user를 추가하면됨
	
	폴리시에서 policysummary를 누르면,현재 json이 어떤 리소스에 어떤 액션을 줬는지 확인할수도 있음
	
	iam에서 계정을 보호할땐,비밀번호와 mfa가 있음
	비밀번호는 최소비밀번호,특정문자유형(대문자숫자문자같은)등을 설정할수있고,90일마다 비밀번호를 강제로 바꾸게 설정할수도 있고,
	비밀번호 재사용을 막을수도있음
	
	mfa는 다단계 인증임,즉 구글로그인할때 띄우는 그런거
	aws에서도 google authenticator을 써서 똑같이 할수있음
	단, 구글껀 하나의 디바이스밖에 안돼서,여러대 쓰고싶으면 authy를 사용할수있음
	
	이거 설정은,자기거에 추가할땐,account settings의 password policy에서 할수있음
	mfa는 우상단의(지역선택 왼쪽의)어카운트를 누르고,my security credentials에서 mfa로 등록할수있음
	authy나 구글같은건 가상mfa장치키면됨
	그리고 otp등록하는거처럼 하면됨
	
	다른사람한테 추가할땐,해당 user에 들어가서,security credentials에서 설정할수있음

	aws에서 액세스할땐,gui콘솔과,cli(터미널,iac도 이쪽타고 액세스함),aws sdk(프로그램에서의 라이브러리)로 액세스할수있음
	이때(액세스할때) 액세스키와 시크릿액세스키가 필요한데,이건 그 계정을 생성할때 딱 한번 다운로드받을수있음
	
	iam roll은,유저처럼 사용자가 사용하라고 만든게 아니라,aws 서비스들에서 가져가서 사용하라고 만들어둔,정책들을 모으는 그룹임
	
	iam access advisor을 사용하면 사용자에게 부여된 서비스권한과 해당서비스가 마지막으로 액세스된 시간을 볼수있음,
	이걸기반으로 최소권한원칙을 할때 도움이됨
	
	그리고 iam밑에(옆에 user,roll선택하는데 밑에),credentials report에서 현재 내 자격증명 보고서를 볼수있음

2.ec2
	ec2랑 상관없이,burget으로 계정별로 한달의 총 예산한계를 지정해둘수있음
	ec2는 ebs(스토리지),로드밸런서,오토스케일링등을 사용할수있음
	ec2 시작시에 init해야하는게 있으면,부트스트래핑에 넣어서 실행할때 자동으로 실행하게 할수있음
	ec2 생성할때,키페어를 사용할때는,윈도우7이나 8이면 pem키파일포맷을 사용해야하고,나머지(리눅스,윈10등)는 전부 pem사용하면됨
	
	맨밑에 유저데이터가 부트스트래핑임,여기에 sh코드를 넣으면됨
	
	ec2 기본시큐리티그룹에선 80포트와 22포트만 열려있기때문에,https(443)으로 연결하려면 시큐리티그룹에서 443 열어줘야함
	
	ec2 인스턴스타입이야 뭐 m5나 m6쓰겠지..
	뭐 특수목적따라 cpu,메모리 더 들어간거 쓸수도있겠지만
	인스턴스클래스들 비교편한사이트
		https://ec2instances.info
		
	시큐리티그룹은 방화벽이라고 보면됨,특정 포트,ip에 대해 열어주거나 닫을수있음
	만약 타임아웃이 나면,시큐리티그룹문제일 확률이 높고,connection refused면,보안그룹은 통과했고 앱에서 튕겨냈을확률이 높음
	기본적으로 모든 인바운드 트래픽은 차단되고,모든 아웃바운드 트래픽은 승인됨
	
	그리고 시큐리티그룹끼리 서로 인바운드가 뚫려있으면,
	거기 속한 모든 ec2에서 서로 통신이 가능하고,같은 시큐리티그룹 내 ec2들도 서로 통신이 가능함
	
	다른포트들은 다 아는거고,3389는 윈도우 리모트 프로토콜임,윈도우인스턴스에 로그일할때 필요
	즉 22는 리눅스,3389는 윈도우
	
	그리고 ec2에서 자기 iam계정을 사용하면 절대안돼고,그 전용으로 iam을 따로 생성해서 해야함
	ec2는 다른사람도 접속할수있어야하는데,그러면 내 계정을 주는거랑 똑같아져버림
	
	예약인스턴스는 특정 인스턴스를 대여하는거,세이빙플랜은 특정 사용량을 달러로 약정해서 싸게받는것
	
	스팟인스턴스는 싸게빌려주는대신,언제꺼질지모름,꺼지면 2분유예기간줌
	그리고 스팟인스턴스 대여요청엔,일회성과 영구요청이 있는데,일회성은 한번 요청하고 끝임,즉 aws가 꺼버리던 뭐하던 상황따라서 내가 대응해줘야함
	영구성은 항상 그 대여한상태를 유지하려고 함,즉 aws가 꺼버려도 계속 요청날리면서 1을 유지하려고함,그래서 필요없어지면 내가꺼야함
	
	spot fleets는 스팟인스턴스 여러개를 묶어서 최대한 가용성높게 대여하는것,즉 하나가 꺼져도 다른인스턴스타입으로 다시대여할수있음
	
	스팟인스턴스를 대여할떈,ec2에서 스팟인스턴스가서 스팟플릿으로 대여하거나,오토스케일링그룹가서 옵션설정할수있음


3.saa(시험관련내용)
	elastic ip는,ec2인스턴스를 중지하면 ip가 바뀌니 주의해야함
	물론 로드밸런서쓰면 상관없음(걔가 알아서 바꿔서연결함)
	
	placement group는,ec2를 배치하는 방식임
	즉 리전내에서 서로 같은az에서 배치되게해서 속도를올리고 안정성을 낮추거나,
	최대한 넓게 퍼지게해서 안정성을 높이거나,아니면 거기보다 더 넓게,az내에서도 다른 렉에 위치하게까지 해서 안정성을 더 높일수있음 
	
	eni는 vpc의 논리적 구성요소로,가상네트워크카드를 나타냄
	그래서 ec2의 네트워크엑세스 권한을 부여함
	eni는 기본적으로 개인ip를 하나가지고,프라이빗ip하나당 eip도 하나씩 가질수있음
	그리고 여기다가 보안그룹을 연결할수도있음
	그리고 eni에 맥주소를 첨부할수도있음
	그리고 이 eni는 특정 az에 바인딩되어있는데,이걸 다른곳으로 옮기면 사설ip가 바뀜
	
	그래서 인스턴스 연결에 문제가있으면,ec2에 연결된 eni를 뗏다가 다시붙이는식으로 초기화하면 해결될수가 있음
	
	ec2의 최대절전기능(hibernate)을 사용하면,램의 상태가 보존되고,그게 ebs에 덤프되고 다시 콜하면 그게 덮어씌워짐
4.ec2 인스턴스 스토리지
	ebs는 인스턴스가 종료돼도 데이터를 다시 돌려받을수있음,그래서 한 ebs볼륨은 한번에 하나의 인스턴스에만 마운트할수있고,
	ebs는 하나의 az에만 생성됨,ec2도 같은 az에 있어야함,다른데있으면 서로 못붙임
	단,한 인스턴스가 두개의 ebs를 마운트하는건 가능함
	
	그리고 옵션으로,ec2가 삭제될때 같이 삭제할수도있음
	
	ec2의 attach volume로 볼륨을 붙일수있음
	이렇게 붙인건 따로 포멧을 해줘야하는데,make an ebs available for use on linux 아마존 글 보면됨
	
	그리고 다른곳으로 ebs를 옮기고싶을땐 스냅샷을 찍어서 다른az에서 복원할수있음
	그리고 fast snapshot restored라고 스냅샷을 사용할때 대기시간이 없게할수있지만,비싼기능임
	
	ami는 인스턴스이미지임,보통은 그냥 주는거써도되는데,직접 만드는게 필요할수도있음
	ec2를 만들고,그걸 create image가서 이미지로 뜨면됨
	이걸하는이유는,부팅시간을 빠르게하기위해서
	
	그리고 인스턴스스토어에선,실제로 물리적으로 연결된 하드드라이브를 연결할수도있음
	
	ebs볼륨에는 st1,gp2/gp3,io2/io3이 있음
	순서대로 성능순서임
	그리고 gp시리즈와 io시리즈만 부트볼륨으로 사용할수있음
	
	일반적으로 gp가 제일 가성비가 좋음
	높은성능이 필요하면 io2를 사용하면됨
	
	멀티어태치는,한 ebs를 여러 ec2에 연결해서 사용하는방식임
	각 ec2는 전체읽기쓰기권한이 있음
	이건 고가용성같은곳에서 사용됨
	물론 그래도 다른 az에서 연결은 할수없고,한 ebs에 ec2 16개까지 연결할수있음
	
	만약 암호화되지않은 볼륨을 암호화하고싶으면,볼륨의 ebs스냅샷을 생성하고 그걸기반으로 볼륨을 생성하고 암호화하고 원본삭제하면됨
	
	efs는 네트워크파일시스템이고,ebs보다 3배쯤 비쌈
	즉,볼륨만 주는게아니라 관리까지 해줌
	그리고 얘는 리눅스에서만 호환됨
	
	보통 웹서빙,컨텐츠관리,데이터공유등을 목적으로 사용하고,액세스제어는 보안그룹으로 하면됨
	즉 기본적으로 같은 디렉토리볼륨을 여러곳에서 공유할때 사용됨
	그리고 efs는 다중az로 설정할수있어서,이경우엔 ebs대용으로 사용하기 좋음
	그리고 기본적으론 멀티az지만,단일로도 설정할수있고 이경우엔 가격이 쌈






























