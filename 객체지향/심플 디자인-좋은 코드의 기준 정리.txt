1.서론
  좋은코드란
    테스트를 통과해야함
    의도를 드러내야함
    중복로직이 없어야함
    클래스+메서드의 갯수가 적어야함
  테스트는 당연히 통과해야하고,의도를 드러낸다는건 좀 주관적임
  그래서 중복이 없으면서 구성요소가 최소한인 코드를 일단 목표로 하는게 좋음
  즉
    코드에서 중복을 제거한다
    그러면서 구성요소를 줄일 방법을 찾는다
  이렇게 진행해야함
2.중복  
  중복을 제거하는건 생각보다 어려움(숨어있는중복,가짜중복)
  
  메서드추출은 위험할수있음
  이건 중복추출할떄도 쓰이지만 긴함수를 짧게 만드는데도 사용됨
  긴 함수는 나쁘지만 잘못된 추출함수는 코드품질이 더 떨어짐(여기갔다가 저기갔다가)
  정적인 코드와 동적인 프로세스사이의 개념적 불일치,즉 점프하는거 자체가 비용임
  특히 함수는 순수함수처럼 멱등하게 동작시키게하는게 좋음(내부에서 다만들어서 주지말고,자기가 맡은부분만)
  즉 배송비계산의 경우엔 배송비만 리턴하고,총금액을 함수안에서 합쳐서 리턴하지않는게 좋음
  
  즉 사이드이펙트로 인한 예상밖의 동작(멱등보장x)와
  함수안에 직접 들어가지않으면 어디서 상태를 변화시키는지 모른다는게 문제가됨
    cal_ship_fee(amount)//이건 내부로직에서 총금액과 배송비를 합침
    amount=amount+cal_ship_fee(amount) //이건 내부로직에서 배송비만 계산해서 리턴
  즉 총금액과 배송비를 합치는,
  즉 상태가 변경되는지점이 원함수내에 있을경우엔(amount=amount+cal_ship_fee(amount)) 해당부분이 중요하지않으면 안을 들여다보지않아도됨
  
  즉 함수에서 사이드이펙트를 제거하는게 좋음
    순수함수에 가깝게 만드는게 좋고
    함수를 Mutator(상태변경)과 Accessor(계산)으로 구분하는게 좋음(계산과 쓰기를 분리해서 한 함수는 하나만하게)
  또한 코드에 중복이 없을때 함수를 추출,즉 함수가 길다는 이유로 추출하는건 맞지않을때가 있음
  정확히는
    중복이 아닌 코드를 메서드로 뽑아내는건 세심한주의가 필요하고,나쁜코드가 되기쉬움
    중복코드를 뽑아내면 비교적 안전하게 좋은 메서드를 작성할수있음
  그래서 중복제거를 위해 메서드추출을 사용하는게 가장 쉬운길임
  긴 메서드를 짧게 만들기위해 메서드추출을 하는건 위험하고 사이드이펙트가 생기기쉬움
  
  중복에는 알아차리기 어려운 중복들이 있음
    평행상속(aFile,bfile이 있을때 aFileHandler,bFileHandler 이렇게 평행적으로 계속 상속이 생기는것)
    if조건의 중복(부분적인 중복,A메서드에서는 a와b를 사용해서 if를 돌리는데,B메서드에서는 a만 사용해서 if를 돌릴때등,보통 다형성으로 해결)
  if조건의 중복은 확산되는경향이 있음(산탄총수술)  
  이런건 보통 다형성을 사용해서,if조건을 유발하는거에 객체를 만들고,거기서 if문으로 분리하던걸 각각 서브클래스로 만들어서 해결함
    멤버십이라고할때,if membership=="vip" membership=="premium" 이런걸 VipMemberShip,PremiumMemberShip 이렇게 해결)
    이때 각각 달라지는건 오버리이드하고,if조건을 썼던건 그냥 객체에 위임
  그리고 이걸 합성하는식으로 해결
  
  같은필드를 여러곳에서 나열하는것도 중복임(엔티티,dto,서비스등)
  그래서 Spring Data Rest등이 있음(엔티티를 만들면 자동으로 dto나 service에도 해줌,근데 커스터마이즈가 어려움)
  
  그리고 서버에서의 중복말고,클라와 서버간의 중복도 있을수있음
  이런중복은 제거가 힘들긴한데,OpenApi 스키마등을 이용해서 코드제너레이션을 하는 방법등으로 해결할수있긴함
  아니면 HTMX등으로 서버에서 다 처리하는방법도 있음

3.구성요소줄이기
  생각할수있는 모든걸 줄이는게좋음
  여기서 방해가 되는건 과도한 일관성임
    디렉토리 패키지 레벨 맞추기(한군데 서브디렉토리가 생겼을때 다른곳에서도 다 똑같은거 만드는등)
  그래서 쉬운일을 쉽게,어려운일은 할만하게 만드는게 좋음
  
  함수는 작아야 이해가 쉽다기보단,한번에 이해해야하는 단위가 더 중요함(메서드추출 남발 x)
  
  중복도 구성요소의 수도 다 측정가능함
  
  일관성에는 중요한일관성이 있고,중요하지않은 일관성이 있음
  중요한 일관성이 깨지면
    클릭수의 증가
	중복코드발생
	버그증가
	명령어수의 증가
  등이 발생함
  이런 문제를해결하는과정에서 중복코드가 발생하는 경우가 많음
  그래서 일관성을 배제하고 중복코드를 잘 제거하다보면 자연스럽게 중요한일관성은 달성되는경우가 많음

4.심플디자인을 방해하는관점
  코드품질을 높이면 더 빨리 완료하기위해서임
  리팩토링을 안해서 리팩토링을 할 시간이 없는거
  
  처음부터 완벽하게 설계할순없음
  
  자동화를 하면 현재의 복잡도가 고착화되어서 바꾸기 어려워지고,점점 복잡함이 늘어나는 경향이 있음
  그래서 일단 단순화를 한 다음 자동화하는게좋음
  또한 일년에 한두번하는거를 위해 자동화하는건 비효율적임














