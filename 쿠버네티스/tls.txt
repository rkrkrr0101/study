일단 공개키와 개인키를 만들고(서로 겹치는 a^b mod c가 나오는 두 소수찾기)
공개키는 막 뿌리고 다니고(이건 클라이언트에서 암호화할 용도,공개키로는 암호화한걸 복호화할수없음)
그걸 클라이언트에서 서버로 전송하면 서버에서 복호화해서 확인

보통 이런 공개키는 암호연산이 엄청 코스트높기때문에,공개키로 대칭키를 전달하는 용도로 사용함(대칭키는 별로 안힘듬 )
그래서 양쪽다 같은키로 암호화복호화를 할수있게 만드는게 tls
이때 순서는
	클라가 대칭키를 생성
	서버가 공개키 개인키를 생성
	클라가 요청걸면 서버가 공개키를 클라에 전송
	클라에서 그거로 자기대칭키를 암호화걸어서 서버에 전송
	그러면 서버에서 개인키로 해독한다음 양쪽다 대칭키를 가지고있게됨
이러면 중간에 전송되는건,서버공개키랑 클라의 암호화된 대칭키밖에없어서 스니핑해도 서버개인키가 없어서 해독을 할수없음
즉 해커는 암호화만 가능한 공개키밖에 가질수없음

단 이거도 해커가 피싱사이트를 만들어서 똑같이 해서 키를 받아가면 답이없어짐
그래서 나온게 인증서임(이사이트가 그사이트가 맞다는걸 제 3자가 공증해주는것)
보통은 공개키를 덜렁보내지않고,인증서에 담아서 보내고,이걸 확인해서 공개키가 내가 접속한곳에서 보낸거라는걸 확인할수있음

인증서에는 url과 인증서발급주체,발급받은사람,공개키가 들어있음
그리고 dns로 여러url을 가지는경우엔,그 모든 이름을 밑에 서브url로 전부 등록해야함

단 이 인증서는 발급요청을 한사람이 같은사람이라는거만 확인함
그래서 나온게 서명된 인증서임
서명된 인증서는,이걸 발급받은사람이 진짜 이 웹사이트의 주인이라는걸 확인하고,자신이 그걸 보증함
보통 생성한사람이 서명을 하게되고,자기가하면 자체서명된 인증서임,이건 안전하지못함(누가만들었는지 어케알고 믿음),보통 크롬으로 이런데들어가면 빨간화면뜸
그래서 공인된 기관에서 서명을 받은 인증서만 취급함

인증서를 발급받을때는,서명기관에 내 공개키랑 정보들을 적어서 보내면,저쪽에서 확인하고(여기서 해커가 걸러짐) 돈받고 인증서를 줌
인증서자체도 서명기관의 공개키 개인키가 있는데,모든키의 공개키는 브라우저에 내장되어있음
이 공개키를 사용해서 인증서가 유효한지를 확인할수 있음(정확히는 공개키로 암호화하면 비밀키로밖에 복호화할수없고,비밀키로 암호화하면 공개키로밖에 복호화할수없음)
즉 비밀키로 암호화한걸로 내가 그사람이 맞다는걸 모든 공개키를 가진사람에게 증명할수있음

이때 서버쪽이 아닌,클라이언트를 해커가 도용할수도 있기때문에,클라이언트도 인증기관에서 인증서를 받아서 이걸 서버에 전송함

ssh접속할땐 공개키-개인키 쌍을 만들고 공개키를 서버에 걸어둔다음,개인키로 접속함(공개키가 자물쇠임)
이떈 .ssh/authorized_keys 에 넣는듯
이때 파일은 
	ssh-rsa 키값1 유저이름1
	ssh-rsa 키값2 유저이름2
이렇게 여러키중 하나만 있어도 되게 할수도있음



보통 공개키가 있는 인증서의 확장자는 crt나 pem임
그리고 비밀키의 확장자는 key나 -key.pem임
그래서 key라는 단어가 없으면 공개키,있으면 비밀키임

그리고 서버인증서는
	server.crt
클라이언트인증서는
	client.crt
서버키
	server.key
클라키
	client.key
이런식 











